{% extends "main.html.twig" %}

{% block title %}{{ 'users.label'|trans }}{% endblock %}

{% block content %}
    <div class="contentbox">
        <h4>{{ 'users.attributes.header'|trans({'%username%': selectedUser.username }) }}</h4>

        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <colgroup>
                    <col class="column-lg" />
                    <col />
                </colgroup>

                <thead>
                <tr>
                    <th>{{ 'label.saml_attribute_name'|trans }}</th>
                    <th>{{ 'label.value'|trans }}</th>
                </tr>
                </thead>

                <tbody>
                {% for samlAttributeName, value in defaultAttributes %}
                    <tr>
                        <td>{{ samlAttributeName }}</td>
                        <td>
                            {% if value is null %}
                                <span class="label label-default">NULL</span>
                            {% elseif value is iterable %}
                                <ul>
                                {% for v in value %}
                                    <li>{{ v }}</li>
                                {% endfor %}
                                </ul>
                            {% else %}
                                {{ value }}
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="contentbox">
        <h4>{{ 'users.attributes.header'|trans({'%username%': selectedUser.username }) }}</h4>

        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <colgroup>
                    <col class="column-lg" />
                    <col class="column-lg" />
                    <col class="column-lg" />
                    <col class="column-lg" />
                    <col class="column-lg" />
                    <col />
                    <col class="column-lg" />
                </colgroup>

                <thead>
                <tr>
                    <th>{{ 'users.attributes.label'|trans }}</th>
                    <th>{{ 'label.saml_attribute_name'|trans }}</th>
                    <th>{{ 'label.value'|trans }}</th>
                    <th>{{ 'users.attributes.source'|trans }}</th>
                </tr>
                </thead>

                <tbody>
                {% for attributeValue in attributes %}
                    <tr>
                        <td>{{ attributeValue.attribute.name }}</td>
                        <td>{{ attributeValue.attribute.samlAttributeName }}</td>
                        <td>
                            {%  if attributeValue.attribute.type == 'text' %}
                                {{ attributeValue.value }}
                            {% elseif attributeValue.attribute.type == 'select' %}
                                {% if attributeValue.attribute.multipleChoice %}
                                    <ul class="list-unstyled">
                                        {% for value in attributeValue.value %}
                                            <li>{{ value }} ({{ attributeValue.attribute.options[value] }})</li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    {{ attributeValue.value }} ({{ attributeValue.attribute.options[attributeValue.value] }})
                                {% endif %}
                            {% endif %}
                        </td>
                        <td>
                            {{ attributeValue|attributeSource }}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock%}